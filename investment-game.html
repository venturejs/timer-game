<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ìà¨Ïûê Í≤åÏûÑ - Î®∏ÌîºÏùò Î≤ïÏπô</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            text-align: center;
            color: #888;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
        }

        .balance {
            color: #667eea;
        }

        .profit {
            color: #28a745;
        }

        .profit.negative {
            color: #dc3545;
        }

        .chart-container {
            height: 250px;
            background: #f8f9fa;
            border-radius: 10px;
            margin-bottom: 20px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        canvas {
            width: 100%;
            height: 100%;
        }

        .price-display {
            text-align: center;
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        .position-info {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #fff3cd;
            border-radius: 10px;
            border: 2px solid #ffc107;
        }

        .position-info.long {
            background: #d1ecf1;
            border-color: #0dcaf0;
        }

        .position-info.short {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .position-info.none {
            display: none;
        }

        .buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            flex: 1;
            padding: 15px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-long {
            background: #0dcaf0;
            color: white;
        }

        .btn-short {
            background: #dc3545;
            color: white;
        }

        .btn-close {
            background: #ffc107;
            color: #333;
        }

        .btn-reset {
            background: #6c757d;
            color: white;
        }

        .message {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .message.show {
            opacity: 1;
        }

        .message.win {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }

        .message.lose {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üéÆ Ìà¨Ïûê Í≤åÏûÑ</h1>
        <div class="subtitle">Î®∏ÌîºÏùò Î≤ïÏπô Ï≤¥ÌóòÌåê</div>

        <div class="stats">
            <div class="stat">
                <div class="stat-label">ÏûîÍ≥†</div>
                <div class="stat-value balance" id="balance">$10,000</div>
            </div>
            <div class="stat">
                <div class="stat-label">ÏàòÏùµ</div>
                <div class="stat-value profit" id="profit">$0</div>
            </div>
        </div>

        <div class="price-display" id="price">$100.00</div>

        <div class="chart-container">
            <canvas id="chart"></canvas>
        </div>

        <div class="position-info none" id="positionInfo">
            Ìè¨ÏßÄÏÖò ÏóÜÏùå
        </div>

        <div class="message" id="message"></div>

        <div class="buttons">
            <button class="btn-long" id="btnLong">üìà Î°± (Îß§Ïàò)</button>
            <button class="btn-short" id="btnShort">üìâ Ïàè (Îß§ÎèÑ)</button>
        </div>

        <div class="buttons">
            <button class="btn-close" id="btnClose" disabled>Ìè¨ÏßÄÏÖò Ï≤≠ÏÇ∞</button>
            <button class="btn-reset" id="btnReset">Í≤åÏûÑ Î¶¨ÏÖã</button>
        </div>
    </div>

    <script>
        // Í≤åÏûÑ ÏÉÅÌÉú
        let balance = 10000;
        let initialBalance = 10000;
        let currentPrice = 100;
        let position = null; // 'long' or 'short'
        let entryPrice = 0;
        let priceHistory = [100];
        let maxHistory = 50;

        // DOM ÏöîÏÜå
        const balanceEl = document.getElementById('balance');
        const profitEl = document.getElementById('profit');
        const priceEl = document.getElementById('price');
        const positionInfoEl = document.getElementById('positionInfo');
        const messageEl = document.getElementById('message');
        const btnLong = document.getElementById('btnLong');
        const btnShort = document.getElementById('btnShort');
        const btnClose = document.getElementById('btnClose');
        const btnReset = document.getElementById('btnReset');
        const canvas = document.getElementById('chart');
        const ctx = canvas.getContext('2d');

        // Ï∫îÎ≤ÑÏä§ ÌÅ¨Í∏∞ ÏÑ§Ï†ï
        function resizeCanvas() {
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Ï∞®Ìä∏ Í∑∏Î¶¨Í∏∞
        function drawChart() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            if (priceHistory.length < 2) return;

            const padding = 20;
            const width = canvas.width - padding * 2;
            const height = canvas.height - padding * 2;
            
            const minPrice = Math.min(...priceHistory);
            const maxPrice = Math.max(...priceHistory);
            const priceRange = maxPrice - minPrice || 1;

            // ÏÑ† Í∑∏Î¶¨Í∏∞
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 2;
            ctx.beginPath();

            priceHistory.forEach((price, index) => {
                const x = padding + (index / (priceHistory.length - 1)) * width;
                const y = padding + height - ((price - minPrice) / priceRange) * height;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });

            ctx.stroke();

            // ÎßàÏßÄÎßâ Ï†ê ÌëúÏãú
            const lastX = padding + width;
            const lastY = padding + height - ((priceHistory[priceHistory.length - 1] - minPrice) / priceRange) * height;
            ctx.fillStyle = '#667eea';
            ctx.beginPath();
            ctx.arc(lastX, lastY, 4, 0, Math.PI * 2);
            ctx.fill();
        }

        // Í∞ÄÍ≤© ÏóÖÎç∞Ïù¥Ìä∏
        function updatePrice() {
            if (position === 'long') {
                // Î°± Ìè¨ÏßÄÏÖòÏù¥Î©¥ Í∞ÄÍ≤© ÌïòÎùΩ
                currentPrice -= Math.random() * 3 + 1;
            } else if (position === 'short') {
                // Ïàè Ìè¨ÏßÄÏÖòÏù¥Î©¥ Í∞ÄÍ≤© ÏÉÅÏäπ
                currentPrice += Math.random() * 3 + 1;
            } else {
                // Ìè¨ÏßÄÏÖò ÏóÜÏúºÎ©¥ ÎûúÎç§
                currentPrice += (Math.random() - 0.5) * 2;
            }

            currentPrice = Math.max(10, currentPrice); // ÏµúÏÜå Í∞ÄÍ≤©
            priceHistory.push(currentPrice);
            
            if (priceHistory.length > maxHistory) {
                priceHistory.shift();
            }

            priceEl.textContent = `$${currentPrice.toFixed(2)}`;
            drawChart();
            updateProfit();
        }

        // ÏàòÏùµ ÏóÖÎç∞Ïù¥Ìä∏
        function updateProfit() {
            if (!position) {
                profitEl.textContent = '$0';
                profitEl.className = 'stat-value profit';
                return;
            }

            let pnl = 0;
            if (position === 'long') {
                pnl = ((currentPrice - entryPrice) / entryPrice) * balance;
            } else if (position === 'short') {
                pnl = ((entryPrice - currentPrice) / entryPrice) * balance;
            }

            profitEl.textContent = `$${pnl.toFixed(2)}`;
            profitEl.className = 'stat-value profit' + (pnl < 0 ? ' negative' : '');
        }

        // Î©îÏãúÏßÄ ÌëúÏãú
        function showMessage(text, type) {
            messageEl.textContent = text;
            messageEl.className = `message ${type} show`;
            setTimeout(() => {
                messageEl.classList.remove('show');
            }, 3000);
        }

        // Î°± Ìè¨ÏßÄÏÖò ÏßÑÏûÖ
        btnLong.addEventListener('click', () => {
            position = 'long';
            entryPrice = currentPrice;
            positionInfoEl.textContent = `üìà Î°± Ìè¨ÏßÄÏÖò ÏßÑÏûÖ: $${entryPrice.toFixed(2)}`;
            positionInfoEl.className = 'position-info long';
            btnLong.disabled = true;
            btnShort.disabled = true;
            btnClose.disabled = false;
            showMessage('Î°± Ìè¨ÏßÄÏÖò ÏßÑÏûÖ! ÌïòÎùΩ ÏãúÏûë...', 'lose');
        });

        // Ïàè Ìè¨ÏßÄÏÖò ÏßÑÏûÖ
        btnShort.addEventListener('click', () => {
            position = 'short';
            entryPrice = currentPrice;
            positionInfoEl.textContent = `üìâ Ïàè Ìè¨ÏßÄÏÖò ÏßÑÏûÖ: $${entryPrice.toFixed(2)}`;
            positionInfoEl.className = 'position-info short';
            btnLong.disabled = true;
            btnShort.disabled = true;
            btnClose.disabled = false;
            showMessage('Ïàè Ìè¨ÏßÄÏÖò ÏßÑÏûÖ! ÏÉÅÏäπ ÏãúÏûë...', 'lose');
        });

        // Ìè¨ÏßÄÏÖò Ï≤≠ÏÇ∞
        btnClose.addEventListener('click', () => {
            let pnl = 0;
            if (position === 'long') {
                pnl = ((currentPrice - entryPrice) / entryPrice) * balance;
            } else if (position === 'short') {
                pnl = ((entryPrice - currentPrice) / entryPrice) * balance;
            }

            balance += pnl;
            balanceEl.textContent = `$${balance.toFixed(2)}`;

            if (pnl > 0) {
                showMessage(`Ï≤≠ÏÇ∞! +$${pnl.toFixed(2)} ÏàòÏùµ!`, 'win');
            } else {
                showMessage(`Ï≤≠ÏÇ∞! $${pnl.toFixed(2)} ÏÜêÏã§...`, 'lose');
            }

            position = null;
            entryPrice = 0;
            positionInfoEl.className = 'position-info none';
            btnLong.disabled = false;
            btnShort.disabled = false;
            btnClose.disabled = true;
            profitEl.textContent = '$0';
            profitEl.className = 'stat-value profit';
        });

        // Í≤åÏûÑ Î¶¨ÏÖã
        btnReset.addEventListener('click', () => {
            balance = initialBalance;
            currentPrice = 100;
            position = null;
            entryPrice = 0;
            priceHistory = [100];
            
            balanceEl.textContent = `$${balance.toFixed(2)}`;
            profitEl.textContent = '$0';
            profitEl.className = 'stat-value profit';
            priceEl.textContent = `$${currentPrice.toFixed(2)}`;
            positionInfoEl.className = 'position-info none';
            
            btnLong.disabled = false;
            btnShort.disabled = false;
            btnClose.disabled = true;
            
            drawChart();
            showMessage('Í≤åÏûÑÏù¥ Î¶¨ÏÖãÎêòÏóàÏäµÎãàÎã§!', 'win');
        });

        // Í≤åÏûÑ Î£®ÌîÑ
        setInterval(updatePrice, 500);

        // Ï¥àÍ∏∞ Ï∞®Ìä∏ Í∑∏Î¶¨Í∏∞
        drawChart();
    </script>
</body>
</html>